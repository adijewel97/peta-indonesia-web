--CREATE OR REPLACE VIEW LISDESBPBL.V_JARINGAN_BY_USER AS
SELECT
    t.ID_JARINGAN,
    t.UNITUPI,
    t.UNITAP,
    t.UNITUP,
    t.KD_PROV,
    t.PROVINSI,
    t.KD_KAB,
    t.KABUPATENKOTA,
    t.KD_KEC,
    t.KECAMATAN,
    t.KD_KEL,
    t.DESAKELURAHAN,
    t.KODE_SYSTEM,
    t.KODE_LAPANGAN,
    t.KATEGORI,
    t.SPESIFIKASI,
    t.PARENT_ID,
    t.TARGET_ID,
    t.VOLUME,
    t.KDSATUAN,
    t.SATUAN,
    t.RUPIAH_SATUAN,
    t.LATITUDE,
    t.LONGITUDE,
    t.TRANSMISI,
    t.STATUS_LAPANGAN,
    t.STATUS_KONTRAK,
    t.NOMOR_KONTRAK_INDUK,
    t.NOMOR_KONTRAK_RINCI,
    t.NAMA_PROJEK,
    t.UID_BADAN_USAHA,
    t.UID_LIT_AREA,
    t.UID_LIT_WILAYAH,
    t.NOMOR_NIDI,
    t.NOMOR_SLO,
    t.FILE_SLO,
    t.FOTO_PRALISA,
    t.FOTO_LISA_TMTR1,
    t.FOTO_LISA_TMTR2,
    t.FOTO_LISA_GARDU,
    t.FOTO_PASCALISA,
    t.KETERANGAN,
    t.USERID,
    t.TGLINSERT,
    t.TGLKOREKSI,
    r.ID_ROLE,
    r.USERNAME,
    r.ROLE_NAME,
    r.STATUS AS ROLE_STATUS,
    r.CREATED_AT AS ROLE_CREATED_AT
FROM LISDESBPBL.TRANS_JARINGAN_LISTRIK t
JOIN LISDESBPBL.MASTER_ROLE_PETUGAS r
  ON t.UNITUPI = r.UNITUPI
 AND t.UNITAP  = r.UNITAP
 AND t.UNITUP  = r.UNITUP
WHERE t.USERID = r.USERNAME
  AND r.STATUS = 'A';
